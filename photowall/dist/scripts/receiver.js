var photowall={};photowall.DEFAULT_SLIDESHOW_DELAY=5e3,photowall.DEFAULT_SLIDESHOW_ANIMATION="fadeIn",photowall.TABINDEX_SELECTOR="paper-button, paper-fab, paper-icon-button",photowall.SlideshowAction={ADD_IMAGE:"addImage",REMOVE_IMAGE:"removeImage",CHANGE_DELAY:"changeDelay",CHANGE_ANIMATION:"changeAnimation"},navigator.presentation.receiver||(()=>{"use strict";const e=function(){this.id,this.state="connected",this.onconnect=null,this.onclose=null,this.onterminate=null,this.onmessage=null,this.messageOrigin_,this.messageSource_};e.prototype.close=function(){"close"!=this.state&&(this.state="closed",this.onclose&&this.onclose(new Event("close",{reason:"closed"})))},e.prototype.terminate=function(){this.state="terminated",window.close()},e.prototype.send=function(e){this.messageSource_.postMessage(e,this.messageOrigin_)};const n=function(){this.connections=[],this.onconnectionavailable=null};Object.defineProperty(navigator,"presentation",{value:{receiver:new function(){this.connectionList=new Promise((t,o)=>{const i=new n;let a=!1;window.addEventListener("message",n=>{const o=n.data;switch(o.type){case"NEW_CONNECTION":const s=new e;s.id="",s.messageOrigin_=n.origin,s.messageSource_=n.source,i.connections.push(s),a?i.onconnectionavailable&&i.onconnectionavailable(s):(a=!0,t(i));break;case"APP_MESSAGE":i.connections.forEach(e=>{e.onmessage&&e.onmessage(new MessageEvent("message",{data:o.data}))})}})})}}})}).call(this),function(){const e={images:[],delay:photowall.DEFAULT_SLIDESHOW_DELAY,animation:photowall.DEFAULT_SLIDESHOW_ANIMATION,currentImageIndex:0};let n=0;const t=function(){return n++},o=function(n){n.onconnect=function(){r(n,e)},n.onmessage=function(n){const t=JSON.parse(n.data);switch(t.action){case photowall.SlideshowAction.ADD_IMAGE:i(t.data);break;case photowall.SlideshowAction.REMOVE_IMAGE:a(t.data);break;case photowall.SlideshowAction.CHANGE_DELAY:s(t.data);break;case photowall.SlideshowAction.CHANGE_ANIMATION:c(t.data)}l(e)}},i=function(n){n.id=t(),e.images.push(n),e.currentImageIndex+2==e.images.length&&m(),1==e.images.length&&d()},a=function(n){return e.images.some(function(t){if(t.id==n){const n=e.images.indexOf(t);return e.images.splice(n,1),n<e.currentImageIndex&&e.currentImageIndex--,n==e.currentImageIndex&&(e.currentImageIndex--,d()),!0}})},s=function(n){e.delay=n,e.currentImageIndex--,d()},c=function(n){e.animation=n},r=function(e,n){"object"==typeof n&&(n=JSON.stringify(n)),e.send(n)},l=function(e){navigator.presentation.receiver.connectionList.then(function(n){n.connections.map(function(n){r(n,e)})})};let u=null,d=function(){if(u&&clearTimeout(u),e.currentImageIndex++,e.currentImageIndex>=e.images.length&&(e.currentImageIndex=0),0==e.images.length)document.querySelector("#slideshow").innerHTML="";else{const n=e.images[e.currentImageIndex],t=new Image;t.src=n.url,t.className="animated "+e.animation,t.addEventListener("webkitAnimationEnd",function(){for(;document.querySelector("#slideshow").childNodes.length>1;)document.querySelector("#slideshow").removeChild(document.querySelector("#slideshow").firstChild)}),document.querySelector("#slideshow").appendChild(t),m(),u=setTimeout(d,e.delay)}};const m=function(){let n=e.currentImageIndex+1;if(n>=e.images.length&&(n=0),e.images.length>1){const t=e.images[n];(new Image).src=t.url}};navigator.presentation.receiver.connectionList.then(function(e){e.connections.map(function(e){o(e)}),e.onconnectionavailable=function(e){o(e[e.length-1])}})}.call(this);